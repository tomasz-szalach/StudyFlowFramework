<!DOCTYPE html>
<html lang="pl" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <title>StudyFlow</title>

    <link rel="stylesheet" th:href="@{/css/stylehomePage.css}"/>
    <script th:src="@{/js/logout.js}" defer></script>
    <script th:src="@{/js/search.js}" defer></script>
    <script th:src="@{/js/changePassword.js}" defer></script>
    <script src="/js/modal.js" defer></script>
    <script src="/js/homepage.js" defer></script>
</head>
<body>

<!-- ‚ñë top-bar ‚ñë -->
<div id="TopBar">
    <img class="logo" th:src="@{/img/logo.svg}" alt="Logo">
    <div id="User-profile">
        <div class="User-profile2" onclick="logout(this)"><span class="Logout">Wyloguj siƒô</span></div>
        <a class="User-profile2" th:href="@{/changePassword}"><span class="ChangePassword">Zmie≈Ñ has≈Ço</span></a>
    </div>
</div>

<div id="container-page">

    <!-- ‚ñë sidebar ‚ñë -->
    <aside class="sidebar">
        <div class="tasklist-display">
            <h3>Twoje listy zada≈Ñ</h3>

            <div th:if="${taskLists != null}">
                <div th:each="taskList,iter:${taskLists}">
                    <div class="home-blocks">
                        <a class="TASKLIST"
                           th:classappend="${iter.index}==0 ? ' selected' : ''"
                           th:attr="data-tasklist-id=${taskList.id}" href="#">
                            <div class="TASKLIST-choose">
                                <span class="tasklist-icon">&#x1F4CB;</span>
                                <div class="name" th:text="${taskList.name}">Nazwa listy</div>
                            </div>
                            <button class="list-menu-btn" th:attr="data-id=${taskList.id}">‚ãÆ</button>
                        </a>
                    </div>
                </div>
            </div>

            <a class="add-tasklist" th:href="@{/addTaskList}">Dodaj nowƒÖ listƒô zada≈Ñ</a>
        </div>
    </aside>

    <!-- ‚ñë main ‚ñë -->
    <main class="main-content">

        <div th:if="${taskLists != null and !taskLists.isEmpty()}">

            <div class="Page-Title-Bar">
                <span class="page-title">Zadania <span th:text="${activeListName}">Domy≈õlna lista</span></span>
            </div>

            <div class="search-bar">
                <input id="search" placeholder="Znajd≈∫ zadanie">
                <span class="search-icon">&#128269;</span>
            </div>

            <!-- przycisk + sort -->
            <div class="toolbar">
                <div class="create-task-container">
                    <a class="create-task-button" th:href="@{/addTaskPage}">Utw√≥rz nowe zadanie</a>
                </div>

                <div class="sort-wrapper">
                    <button type="button" class="sort-btn" title="Sortowanie">
                        <span class="sort-label">Sortuj ‚Üë‚Üì</span>
                        <span class="sort-dir" style="display:none">‚ñ≤</span><!-- dla JS -->
                    </button>

                    <div class="sort-menu">
                        <button data-field="due">Termin wykonania</button>
                        <button data-field="priority">Priorytet</button>
                        <button data-field="created">Data utworzenia</button>
                        <button data-field="alpha">Alfabetycznie</button>
                    </div>
                </div>
            </div>

            <div class="sort-info"></div>

            <section class="task-display"></section>
        </div>

        <div th:unless="${taskLists != null and !taskLists.isEmpty()}" class="empty-state">
            <h2>Witaj w StudyFlow</h2>
            <p>Nie masz jeszcze ≈ºadnych list zada≈Ñ.</p>
            <a class="add-tasklist-button" th:href="@{/addTaskList}">Dodaj nowƒÖ listƒô</a>
        </div>
    </main>
</div>

<!-- szablon pojedynczego zadania -->
<template id="task-template">
    <div class="task-item" data-task-id="">
        <div class="task-header">
            <input type="checkbox" class="task-checkbox">
            <div class="name">Task Name</div>
            <div class="due-date">Due Date</div>
            <div class="status-box"><div class="status">Status</div></div>
            <button class="delete-task-button">üóëÔ∏è</button>
        </div>
        <div class="description">Task Description</div>
    </div>
</template>

</body>
</html>
